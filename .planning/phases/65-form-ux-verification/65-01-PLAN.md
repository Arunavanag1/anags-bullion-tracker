---
phase: 65-form-ux-verification
plan: 01
type: execute
---

<objective>
End-to-end walkthrough of both add item forms on iOS simulator, verifying all Phase 63 (keyboard management) and Phase 64 (spacing & layout) changes work correctly. Fix any issues discovered during testing.

Purpose: Phases 63 and 64 both deferred human verification. This phase combines both verifications into a single walkthrough, and fixes any layout/keyboard issues found.
Output: Both forms verified working on iOS with proper keyboard management, field spacing, and section dividers. Any issues found are fixed and committed.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/63-keyboard-management/63-01-SUMMARY.md
@.planning/phases/64-form-spacing-layout/64-01-SUMMARY.md

@bullion-tracker-mobile/src/components/ui/Input.tsx
@bullion-tracker-mobile/src/components/ui/FormToolbar.tsx
@bullion-tracker-mobile/src/components/addItem/BullionForm.tsx
@bullion-tracker-mobile/src/components/addItem/NumismaticForm.tsx
@bullion-tracker-mobile/src/screens/AddItemScreen.tsx

**What needs verification (Phase 63 - Keyboard):**
- KeyboardAvoidingView adjusts layout when keyboard opens
- Tap-to-dismiss works (tap empty space to close keyboard)
- Interactive scroll dismiss works (drag ScrollView down)
- FormToolbar Previous/Next/Done buttons work on iOS
- BullionForm 7-field ref chain navigates sequentially
- NumismaticForm dynamic ref chain works (RAW: 5 fields, graded: 4 fields)
- returnKeyType="next" advances fields, "done" dismisses keyboard

**What needs verification (Phase 64 - Spacing):**
- Input fields have consistent 16px vertical spacing (no flush fields)
- BullionForm 3 sections: "ITEM DETAILS", "PURCHASE INFO", "NOTES & PHOTOS"
- NumismaticForm 4 sections (RAW): "COIN IDENTIFICATION", "GRADING", "VALUATION", "NOTES & PHOTOS"
- NumismaticForm 4 sections (non-RAW): "COIN IDENTIFICATION", "CERTIFICATION & GRADING", "VALUATION", "NOTES & PHOTOS"
- Section dividers (thin 1px lines) visible between sections
- Metal Content card (RAW) still has its own background/border
- Photos section properly spaced from fields above
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Combined Phase 63 (keyboard management) and Phase 64 (form spacing) improvements across both BullionForm and NumismaticForm</what-built>
  <how-to-verify>
    **Setup:** Start the backend on port 3002 and Expo with `npx expo start --ios --clear`. Temporarily set apiUrl to `http://localhost:3002` in app.json if needed.

    **BullionForm (Add Item > Bullion):**
    1. Verify section headers: "ITEM DETAILS", "PURCHASE INFO", "NOTES & PHOTOS"
    2. Verify thin divider lines between sections
    3. Verify consistent spacing between all input fields
    4. Tap "Description" field — keyboard should appear, form should scroll up
    5. Verify toolbar above keyboard with Previous (disabled), Next, Done
    6. Tap Next repeatedly — should navigate: Description > Weight > Quantity > Purchase Price > Premium > Purchase Date > Notes
    7. Tap Done — keyboard dismisses
    8. Tap a field, then tap empty space — keyboard dismisses
    9. Scroll to bottom — Photos section has proper spacing
    10. Submit a test bullion item — form submission still works

    **NumismaticForm RAW (Add Item > Numismatic > RAW):**
    11. Verify sections: "COIN IDENTIFICATION", "GRADING", "VALUATION", "NOTES & PHOTOS"
    12. Verify Metal Content card has its own background/border
    13. Verify toolbar navigates through: Purity > Weight > Purchase Price > Purchase Date > Notes
    14. Verify GradePicker and switches work while keyboard is open

    **NumismaticForm PCGS (Add Item > Numismatic > PCGS):**
    15. Verify sections: "COIN IDENTIFICATION", "CERTIFICATION & GRADING", "VALUATION", "NOTES & PHOTOS"
    16. Verify toolbar navigates through: Cert Number > Purchase Price > Purchase Date > Notes
    17. Verify cert lookup still triggers on 7+ digit input
  </how-to-verify>
  <resume-signal>Type "approved" if everything works, or describe issues to fix (e.g., "spacing too tight between X and Y", "toolbar not showing on field Z")</resume-signal>
</task>

<task type="auto">
  <name>Task 2: Fix issues from verification (if any)</name>
  <files>
    bullion-tracker-mobile/src/components/ui/Input.tsx,
    bullion-tracker-mobile/src/components/addItem/BullionForm.tsx,
    bullion-tracker-mobile/src/components/addItem/NumismaticForm.tsx,
    bullion-tracker-mobile/src/screens/AddItemScreen.tsx
  </files>
  <action>
  If the human-verify checkpoint identified issues, fix them here. Common fixes might include:
  - Adjusting marginBottom values
  - Fixing divider positioning
  - Adjusting KeyboardAvoidingView offset
  - Fixing ref chain ordering

  If checkpoint was approved with no issues, skip this task (mark as "No fixes needed").
  </action>
  <verify>
  Run `cd bullion-tracker-mobile && npx tsc --noEmit` — no type errors.
  </verify>
  <done>
  - All reported issues fixed (or no issues found)
  - TypeScript compiles without errors
  </done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] BullionForm verified on iOS: keyboard, spacing, sections, submission
- [ ] NumismaticForm RAW verified: keyboard, spacing, sections, metal content card
- [ ] NumismaticForm PCGS verified: keyboard, spacing, sections, cert lookup
- [ ] All reported issues fixed (or none found)
- [ ] `cd bullion-tracker-mobile && npx tsc --noEmit` passes
</verification>

<success_criteria>

- Human verification approved (or issues fixed and re-verified)
- All verification checks pass
- No TypeScript errors
- Both forms fully functional with keyboard management and spacing
</success_criteria>

<output>
After completion, create `.planning/phases/65-form-ux-verification/65-01-SUMMARY.md`
</output>
